--DROP LOGIN CLRLogin;
--DROP ASYMMETRIC KEY CLRLog;

--DROP PROC net.httpRequest
--DROP ASSEMBLY CLRhttpWebRequests

USE Utility
GO

DECLARE @ClrEnabled sql_variant;

SELECT @ClrEnabled = value 
FROM sys.configurations
WHERE name = 'clr enabled';

IF (@ClrEnabled = 0)
	BEGIN
		EXEC sp_configure 'show advanced options', 1;
		RECONFIGURE;
		EXEC sp_configure 'clr enabled', 1;
		RECONFIGURE;
	END
   

	---
	--- Make sure that the Login desired to own assembly exists
	---
	DECLARE @login sysname = 'CLRLogin'
	IF (NOT EXISTS (
					SELECT	*
					FROM	[master].sys.server_principals sp
					WHERE	sp.name = @login
				)
		)
	BEGIN
		PRINT '';
		PRINT 'Login [' + @login + '] does not exist ...';

		IF (NOT EXISTS(
						SELECT	*
						FROM	[master].sys.assemblies sa
						WHERE	sa.name = N'CLR_httpWebRequests'
					)
			)
		BEGIN
			PRINT 'Creating temporary Assembly ...';
			EXEC(N'USE [master];
					CREATE ASSEMBLY [CLR_httpWebRequests]
					AUTHORIZATION [dbo]
					FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300C699E6560000000000000000E00002210B010B000020000000060000000000009E3F00000020000000400000000000100020000000020000040000000000000004000000000000000080000000020000FD2F0000030040850000100000100000000010000010000000000000100000000000000000000000503F00004B00000000400000D002000000000000000000000000000000000000006000000C000000183E00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000A41F0000002000000020000000020000000000000000000000000000200000602E72737263000000D0020000004000000004000000220000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000002600000000000000000000000000004000004200000000000000000000000000000000803F0000000000004800000002000500442A0000D41300000900000000000000000000000000000050200000800000000000000000000000000000000000000000000000000000000000000000000000CD39658D6497AB9FC867D446454D082E9099E4EEBE8247F593779A3845D6D9BC93CE26297ED4EDB0071783E40D94CBFD4141506EA8AE408D180E71DC1D0857ECF917736EAA6C4F245E77BA57E7DC25BA1DC5FAB1A0F99997B60CC9ABFF32E1D8E8C6FB000DE1C2C3F5493F3B94C26F1A184C1F4687E3F479AA2B69638FABCC6D1B300500C908000001000011007201000070730600000A0A00280700000A0B280800000A0E058C02000001280900000A6F0A00000A13070E077231000070280B00000A81020000010E0616FE01131311133AE8000000000772330000706F0C00000A000772310000706F0C00000A000772810000706F0C00000A000772A3000070028C02000001280900000A280D00000A6F0C00000A000772B7000070038C02000001280900000A280D00000A6F0C00000A000772C5000070048C02000001280900000A280D00000A6F0C00000A000772E9000070058C02000001280900000A280D00000A6F0C00000A000772010100700E048C02000001280900000A280D00000A6F0C00000A000772190100700E058C02000001280900000A280D00000A6F0C00000A000772310000706F0C00000A000772310100706F0C00000A000000038C02000001280900000A280E00000A74100000010C00DE042600FE1A000E0616FE01131311132D420007725F0100706F0C00000A000772310000706F0C00000A000772A9010070028C02000001280900000A280D00000A6F0C00000A000772CD0100706F0C00000A000000058C02000001280900000A14FE0116FE01058C02000001280900000A7231000070280F00000A5F16FE01131311132D78000E0616FE01131311132D2F0007722D020070058C02000001280900000A72650200700E048C02000001280900000A281000000A6F0C00000A000008058C02000001280900000A0E048C02000001280900000A731100000A6F1200000A000E0616FE01131311132D0E000772810200706F0C00000A00000000DE3226000772B9020070058C02000001280900000A72650200700E048C02000001280900000A281000000A6F0C00000A0000DE0000048C02000001280900000A6F1300000A16FE0216FE01131311133AF0000000000E0616FE01131311132D1A000772310000706F0C00000A000772FF0200706F0C00000A0000178D1300000113141114161F3B9D1114130A048C02000001280900000A110A176F1400000A130B110A16110A8E69281500000A00110A161F3A9D1613082B6E00110B11089A110A176F1400000A130C086F1600000A110C169A110C179A6F1700000A000E0616FE01131311132D3800077239030070110C169A280D00000A6F0C00000A00077245030070110C179A280D00000A6F0C00000A000772310000706F0C00000A0000001108175813081108110B8E69FE04131311132D840772550300706F0C00000A00002B0E0008729B0300706F1800000A0000028C02000001280900000A6F1900000A72D5030070281A00000A16FE01131311133AA40000000008028C02000001280900000A6F1B00000A000872DF0300706F1C00000A000811078E696A6F1D00000A000E0616FE01131311132D1A000772310000706F0C00000A000772230400706F0C00000A0000086F1E00000A0D0911071611078E696F1F00000A00096F2000000A000E0616FE01131311132D2C0007724F0400706F0C00000A0007729104007009282100000A6F0C00000A000772310000706F0C00000A0000000E0616FE01131311132D1A000772310000706F0C00000A000772B50400706F0C00000A000000086F2200000A741A00000113050E0616FE01131311133A9C000000000772DD04007011056F2300000A282400000A280D00000A6F0C00000A0007720305007011056F2500000A282600000A280D00000A6F0C00000A00071B8D0100000113151115167225050070A211151711056F2700000A8C1B000001282800000A8C1C000001A21115187255050070A211151911056F2700000A8C1B000001280900000AA211151A725D050070A21115282900000A6F0C00000A000000DDDE000000130D00110D6F2A00000A130E000772310000706F0C00000A00077261050070110D6F2B00000A280D00000A6F0C00000A00110D6F2C00000A130F0772A5050070110F8C1E000001282100000A6F0C00000A00110F1DFE0116FE01131311132D64000772E90500706F0C00000A00110D6F2A00000A741A0000011310071A8D0100000113151115167231060070A211151711106F2700000A8C1C000001A2111518727D060070A211151911106F2700000A8C1B000001A21115282900000A6F0C00000A000000DE14110E14FE01131311132D08110E6F2D00000A00DC00FE1A000011056F2E00000A0D09732F00000A13040E0811046F3000000A280B00000A810200000100DE0D26007285060070733100000A7A000E0616FE01131311132D1A000772310000706F0C00000A000772220700706F0C00000A0000086F1600000A130611066F3200000A131116130838EC000000000E0616FE01131311132D1800077239030070111111089A280D00000A6F0C00000A00000E07257102000001111111089A725E070070280D00000A280B00000A283300000A81020000011106111111089A6F3400000A13121613092B77000E0616FE01131311132D3E00071A8D0100000113151115167264070070A211151711098C1C000001A2111518725E070070A2111519111211099AA21115282900000A6F0C00000A00000E07257102000001111211099A7272070070280D00000A280B00000A283300000A810200000100110917581309110911128E69FE04131311133A78FFFFFF00110817581308110811118E69FE04131311133A03FFFFFF0E0616FE01131311132D1A000772780700706F0C00000A000772310000706F0C00000A000011056F3500000A00096F2000000A0011046F3600000A000E0911056F2700000A8C1B000001282800000A540E0616FE01131311133ABE000000000772310000706F0C00000A000772C00700706F0C00000A000772310000706F0C00000A000E0871020000018C02000001280900000A6F1300000A16FE0216FE01131311132D10000772160800706F0C00000A00002B300E0771020000018C02000001280900000A6F1300000A16FE0216FE01131311132D0E0007725C0800706F0C00000A00000772AA0800700E094A283700000A8C1C000001282100000A6F0C00000A000772310000706F0C00000A000772C60800706F0C00000A000000DE120614FE01131311132D07066F2D00000A00DC002A0000004194000000000000320100001A0000004C0100000400000001000001000000009E010000AC0000004A02000032000000010000010200000053050000BB0000000E06000014000000000000000000000089040000BE00000047050000DE0000001D0000010000000026060000270000004D0600000D00000001000001020000000C000000A9080000B508000012000000000000001E02283800000A2A42534A4201000100000000000C00000076322E302E35303732370000000005006C00000048030000237E0000B40300003C05000023537472696E677300000000F0080000D808000023555300C8110000100000002347554944000000D8110000FC01000023426C6F620000000000000002000001471502000900000000FA253300160000010000002200000002000000020000000A000000380000000400000001000000010000000300000000000A00010000000000060056004F000A007E00690006000401E5000600440131011300580100000600870167010600A70167010A00F401D9010A0020020A020A002E02D9010A003902D901060056024A02060068024F00060093024F000E00AC02A1020E00BE02A1020E00DB02A1020E00ED02A102060015034F0006001A034F00060033034F000E003F03A1020E007E035F030600F403EA030E001804A1020E003004A1020E006204A102060088044F000E008E04A1020E00A804A1020600C6044F000600EC04EA030600F904EA0306000E054F0000000000010000000000010001000100100022003300050001000100D02000000000960088000A0001003C2A000000008618940023000B00000001009A0000000200A10000000300A50000000400B40000000500BD0000000600C60000000700CF0002000800D50002000900110102000A001E01190094002300210094002700310094002D0039009400230041009400230049009400D90051004102DE0061005F02E30069007002E80061007902ED0011008202F30059008E02D90071009A02F9007900B702FF007100CD02050171009A020B018900940013017900FA02190171000A031F0171002D032301A90039032C01790053033401B9009203130181009B03D9007100A90339017100B10305017900BD03D9007900C803D9007900D8033D017900FB034201C1000C044701C1001204230071009A024F01790024045501C90040045A01690070025E01C90052043901690070026301D10071046801690080046D0171009A027201E9009B045501090070023901E900BB047801F900D2042300C900DA044201010194007D0109010405390111019400D900B90018058301110024058801B90030059101C9001204230009011204230069008004970109009400230020002B00D4002E001300C9012E001B00D2012E002300DB019C01048000000000000000000000010000003200C5010000020000000000000000000000010046000000000002000000000000000000000001005D000000000002000000000000000000000001004F00000000000000003C4D6F64756C653E00434C525F6874747057656252657175657374732E646C6C0053746F72656450726F6365647572657300434C52687474705765625265717565737473006D73636F726C69620053797374656D004F626A6563740053797374656D2E446174610053797374656D2E446174612E53716C54797065730053716C537472696E67006874747052657175657374002E63746F72006D6574686F640075726C00726571756573744865616465727300757365726E616D650070617373776F726400706F73744461746100446562756700726573706F6E7365486561646572730053797374656D2E52756E74696D652E496E7465726F705365727669636573004F757441747472696275746500726573706F6E73654461746100726573706F6E7365537461747573436F64650053797374656D2E446961676E6F73746963730044656275676761626C6541747472696275746500446562756767696E674D6F6465730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C69747941747472696275746500434C525F687474705765625265717565737473004D6963726F736F66742E53716C5365727665722E5365727665720053716C50726F6365647572654174747269627574650053797374656D2E446174612E53716C436C69656E740053716C436F6E6E656374696F6E0053716C436F6E746578740053716C50697065006765745F506970650053797374656D2E5465787400456E636F64696E67006765745F5554463800436F6E7665727400546F537472696E67004765744279746573006F705F496D706C696369740053656E6400537472696E6700436F6E6361740053797374656D2E4E6574005765625265717565737400437265617465004874747057656252657175657374006F705F496E657175616C697479004E6574776F726B43726564656E7469616C004943726564656E7469616C73007365745F43726564656E7469616C73006765745F4C656E677468004368617200537472696E6753706C69744F7074696F6E730053706C697400417272617900436C65617200576562486561646572436F6C6C656374696F6E006765745F486561646572730053797374656D2E436F6C6C656374696F6E732E5370656369616C697A6564004E616D6556616C7565436F6C6C656374696F6E007365745F4974656D007365745F557365724167656E7400546F5570706572006F705F457175616C697479007365745F4D6574686F64007365745F436F6E74656E7454797065007365745F436F6E74656E744C656E6774680053797374656D2E494F0053747265616D004765745265717565737453747265616D00577269746500436C6F736500576562526573706F6E736500476574526573706F6E73650048747470576562526573706F6E7365006765745F436F6E74656E744C656E677468006765745F436F6E74656E74547970650048747470537461747573436F6465006765745F537461747573436F646500546F496E74333200496E74333200576562457863657074696F6E006765745F526573706F6E736500576562457863657074696F6E537461747573006765745F5374617475730049446973706F7361626C6500446973706F736500476574526573706F6E736553747265616D0053747265616D52656164657200546578745265616465720052656164546F456E6400457863657074696F6E006765745F416C6C4B657973006F705F4164646974696F6E0047657456616C756573000000002F63006F006E007400650078007400200063006F006E006E0065006300740069006F006E003D0074007200750065000001004D2D002D002D002D002D00530074006F007200650064002000700072006F006300650064007500720065002000480074007400700052006500710075006500730074002D002D002D002D002D000121530065006E007400200070006100720061006D00650074006500720073003A0000134D006500740068006F00640020003D002000000D550052004C0020003D00200000237200650071007500650073007400480065006100640065007200730020003D002000001755007300650072006E0061006D00650020003D0020000017500061007300730077006F007200640020003D002000001770006F0073007400440061007400610020003D002000002D4300720065006100740065002000480074007400700057006500620052006500710075006500730074002E000049480074007400700057006500620052006500710075006500730074002000630072006500610074006500640020007300750063006300650073007300660075006C006C0079002E000023520065007100750065007300740020006D006500740068006F00640020003D002000005F43006F006E00740065006E007400540079007000650020003D0020006100700070006C00690063006100740069006F006E002F0078002D007700770077002D0066006F0072006D002D00750072006C0065006E0063006F006400650064000137410075007400680065006E007400690063006100740069006F006E003A00200055007300650072006E0061006D00650020003D002000001B3B002000500061007300730077006F007200640020003D0020000037410075007400680065006E007400690063006100740069006F006E0020007300750063006300650073007300660075006C006C002E000045410075007400680065006E007400690063006100740069006F006E0020006600610069006C00650064003A00200055007300650072006E0061006D00650020003D00200000392A002A002A0048005400540050002000480065006100640065007200730020002D00200052006500710075006500730074002A002A002A00010B4B00650079003A002000000F560061006C00750065003A00200000452A002A002A0048005400540050002000480065006100640065007200730020002D002000520065007100750065007300740020002D00200045006E0064002A002A002A00013943004C0052002000770065006200200063006C00690065006E00740020006F006E002000530051004C002000530065007200760065007200000950004F005300540000436100700070006C00690063006100740069006F006E002F0078002D007700770077002D0066006F0072006D002D00750072006C0065006E0063006F00640065006400012B5300750062006D00690074002000740068006500200050004F0053005400200064006100740061002E0000414400610074006100200068006100730020006200650065006E0020007300750063006300650073007300660075006C006C0079002000730065006E0074002E00002352006500710075006500730074002000730074007200650061006D0020003D00200000274700650074002000480074007400700057006500620052006500730070006F006E0073006500002543006F006E00740065006E00740020006C0065006E006700740068002000690073002000002143006F006E00740065006E007400200074007900700065002000690073002000002F52006500730070006F006E00730065002000730074006100740075007300200063006F006400650020003D00200000072000280020000003290000434800540054005000200072006500730070006F006E0073006500200065007800630065007000740069006F006E0020006D006500730073006100670065003A00200000434800540054005000200072006500730070006F006E0073006500200065007800630065007000740069006F006E002C0020007300740061007400750073003A002000004754006800650020007300650072007600650072002000720065007400750072006E00650064002000700072006F0074006F0063006F006C0020006500720072006F0072002000004B4800540054005000200072006500730070006F006E0073006500200065007800630065007000740069006F006E002000730074006100740075007300200063006F00640065003A002000000720002D00200001809B43004C00520020002D0020004E0061006D0065003A0020004800740074007000570065006200520065007100750065007300740073003B002000530074006F00720065006400500072006F006300650064007500720065003A0020004800740074007000520065007100750065007300740020002D00200020004700650074002000640061007400610020006600610069006C00650064002E00013B2A002A002A0048005400540050002000480065006100640065007200730020002D00200052006500730070006F006E00730065002A002A002A0001053A002000000D560061006C0075006500200000053B00200000472A002A002A0048005400540050002000480065006100640065007200730020002D00200052006500730070006F006E007300650020002D00200045006E0064002A002A002A000155530074006F007200650064002000700072006F0063006500640075007200650020006900730020006500780065006300750074006500640020007300750063006300650073007300660075006C006C0079002E00004544006100740061002000690073002000720065007400750072006E0065006400200069006E0020004800540054005000200072006500730070006F006E00730065002E00004D480065006100640065007200730020006100720065002000720065007400750072006E0065006400200069006E0020004800540054005000200072006500730070006F006E00730065002E00001B530074006100740075007300200063006F00640065003A002000000F5300550043004300450053005300000000C89241F9070CDB4DBEA0B275B3F729230008B77A5C561934E08918000A0111091109110911091109110902101109101109100803200001052001011115042001010880A000240000048000009400000006020000002400005253413100040000010001005791DBD2AB9B4FD62AC9F4A1B20B656892B86D780CAC24A9BE1F8E9BCF362C84927FFC69C90F3F0493D16421808697D1129C273C23DFC9DED45C7D650001178DA5B85CC9DFDD9BDE18A795D6EE308DBE988AF12C8F6EF4E6BCD94B0FA0B269E7E9A266652B9EDFB2243E1BEF7D941D08946370E0CA8DABEE4EAB92DA026D42A60401000000042001010E040000122D04000012310400010E1C0520011D050E05000111090E0500020E0E0E050001123D0E050002020E0E0700040E0E0E0E0E052002010E0E052001011249032000080820021D0E1D031151070003011255080804200012590320000E042001010A0420001261072003011D0508080500020E1C1C04200012650320000A0400010E0A0400010E0E042000116D040001081C0500010E1D1C04200011790520010112610420001D0E0800021109110911090520011D0E0E04000108082C07161225122D124112611280811269125D1D0508081D031D0E1D0E12751265117912691D0E1D0E021D031D1C0801000701000000000801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F777301000000000000C699E65600000000020000001C010000343E000034200000525344533FBAF09652D0874AB440910305FA5F7A03000000633A5C50726F6A656374735C4874747057656252657175657374735C4874747057656252657175657374735C6F626A5C44656275675C434C525F6874747057656252657175657374732E706462000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000783F000000000000000000008E3F0000002000000000000000000000000000000000000000000000803F00000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF2500200010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000740200000000000000000000740234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004D4010000010053007400720069006E006700460069006C00650049006E0066006F000000B001000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E003000000050001800010049006E007400650072006E0061006C004E0061006D006500000043004C0052005F006800740074007000570065006200520065007100750065007300740073002E0064006C006C0000002800020001004C006500670061006C0043006F0070007900720069006700680074000000200000005800180001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000043004C0052005F006800740074007000570065006200520065007100750065007300740073002E0064006C006C000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000A03F00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
					WITH PERMISSION_SET = SAFE;');
		END;


		IF (NOT EXISTS(
						SELECT	*
						FROM	[master].sys.asymmetric_keys ak
						WHERE	ak.name = N'CLRLog'
					)
			)
		BEGIN
			PRINT 'Creating Asymmetric Key: [CLRLog] ...';
			EXEC(N'USE [master];
					CREATE ASYMMETRIC KEY [CLRLog] FROM ASSEMBLY [CLR_httpWebRequests];');
		END;


		IF (NOT EXISTS(
						SELECT	*
						FROM	[master].sys.server_principals sp
						WHERE	sp.name = @login
						AND		sp.[type] = N'K' -- ASYMMETRIC_KEY_MAPPED_LOGIN
					)
			)
		BEGIN
			PRINT 'Creating Login: [' + @login + '] ...';
			EXEC(N'USE [master];
					CREATE LOGIN [' + @login + N'] FROM ASYMMETRIC KEY [CLRLog];');
		END;


		PRINT 'Granting ExternalAccess ...';
		EXEC(N'USE [master];
				GRANT EXTERNAL ACCESS ASSEMBLY TO [' + @login + N'];');


		PRINT 'Dropping temporary Assembly ...';
		EXEC(N'USE [master];
				DROP ASSEMBLY [CLR_httpWebRequests];');

		PRINT 'Login Created.';
		PRINT '';
	END;
	ELSE
	BEGIN
		PRINT N'Login [' + @login + N'] already exists; skipping';
		PRINT '';
	END;


-- Schema
IF SCHEMA_ID('net') IS NULL
    EXEC('CREATE SCHEMA net');
GO

--Stored procedures
IF EXISTS ( SELECT  *
            FROM    sys.procedures
            WHERE   SCHEMA_NAME(schema_id) = 'net'
                    AND name = 'httpRequestWrapper' )
	BEGIN
		DROP PROCEDURE [net].[httpRequestWrapper]; 
	END
    
GO

IF EXISTS ( SELECT  *
            FROM    sys.procedures
            WHERE   SCHEMA_NAME(schema_id) = 'net'
                    AND name = 'httpRequest' )
    BEGIN
		DROP PROCEDURE [net].[httpRequest];   	
	END
    
GO
​
--Assembly
IF EXISTS ( SELECT * FROM Utility.sys.assemblies AS a WHERE a.name = 'CLR_httpWebRequests')
	BEGIN
		DROP ASSEMBLY CLR_httpWebRequests;
	END

--CREATE ASSEMBLY HttpWebRequests
--FROM 'C:\Projects\HttpWebRequests\HttpWebRequests\bin\Debug\HttpWebRequests.dll'
--WITH PERMISSION_SET = EXTERNAL_ACCESS;

GO

CREATE ASSEMBLY [CLR_httpWebRequests]
    AUTHORIZATION [dbo]
    FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300C699E6560000000000000000E00002210B010B000020000000060000000000009E3F00000020000000400000000000100020000000020000040000000000000004000000000000000080000000020000FD2F0000030040850000100000100000000010000010000000000000100000000000000000000000503F00004B00000000400000D002000000000000000000000000000000000000006000000C000000183E00001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000A41F0000002000000020000000020000000000000000000000000000200000602E72737263000000D0020000004000000004000000220000000000000000000000000000400000402E72656C6F6300000C0000000060000000020000002600000000000000000000000000004000004200000000000000000000000000000000803F0000000000004800000002000500442A0000D41300000900000000000000000000000000000050200000800000000000000000000000000000000000000000000000000000000000000000000000CD39658D6497AB9FC867D446454D082E9099E4EEBE8247F593779A3845D6D9BC93CE26297ED4EDB0071783E40D94CBFD4141506EA8AE408D180E71DC1D0857ECF917736EAA6C4F245E77BA57E7DC25BA1DC5FAB1A0F99997B60CC9ABFF32E1D8E8C6FB000DE1C2C3F5493F3B94C26F1A184C1F4687E3F479AA2B69638FABCC6D1B300500C908000001000011007201000070730600000A0A00280700000A0B280800000A0E058C02000001280900000A6F0A00000A13070E077231000070280B00000A81020000010E0616FE01131311133AE8000000000772330000706F0C00000A000772310000706F0C00000A000772810000706F0C00000A000772A3000070028C02000001280900000A280D00000A6F0C00000A000772B7000070038C02000001280900000A280D00000A6F0C00000A000772C5000070048C02000001280900000A280D00000A6F0C00000A000772E9000070058C02000001280900000A280D00000A6F0C00000A000772010100700E048C02000001280900000A280D00000A6F0C00000A000772190100700E058C02000001280900000A280D00000A6F0C00000A000772310000706F0C00000A000772310100706F0C00000A000000038C02000001280900000A280E00000A74100000010C00DE042600FE1A000E0616FE01131311132D420007725F0100706F0C00000A000772310000706F0C00000A000772A9010070028C02000001280900000A280D00000A6F0C00000A000772CD0100706F0C00000A000000058C02000001280900000A14FE0116FE01058C02000001280900000A7231000070280F00000A5F16FE01131311132D78000E0616FE01131311132D2F0007722D020070058C02000001280900000A72650200700E048C02000001280900000A281000000A6F0C00000A000008058C02000001280900000A0E048C02000001280900000A731100000A6F1200000A000E0616FE01131311132D0E000772810200706F0C00000A00000000DE3226000772B9020070058C02000001280900000A72650200700E048C02000001280900000A281000000A6F0C00000A0000DE0000048C02000001280900000A6F1300000A16FE0216FE01131311133AF0000000000E0616FE01131311132D1A000772310000706F0C00000A000772FF0200706F0C00000A0000178D1300000113141114161F3B9D1114130A048C02000001280900000A110A176F1400000A130B110A16110A8E69281500000A00110A161F3A9D1613082B6E00110B11089A110A176F1400000A130C086F1600000A110C169A110C179A6F1700000A000E0616FE01131311132D3800077239030070110C169A280D00000A6F0C00000A00077245030070110C179A280D00000A6F0C00000A000772310000706F0C00000A0000001108175813081108110B8E69FE04131311132D840772550300706F0C00000A00002B0E0008729B0300706F1800000A0000028C02000001280900000A6F1900000A72D5030070281A00000A16FE01131311133AA40000000008028C02000001280900000A6F1B00000A000872DF0300706F1C00000A000811078E696A6F1D00000A000E0616FE01131311132D1A000772310000706F0C00000A000772230400706F0C00000A0000086F1E00000A0D0911071611078E696F1F00000A00096F2000000A000E0616FE01131311132D2C0007724F0400706F0C00000A0007729104007009282100000A6F0C00000A000772310000706F0C00000A0000000E0616FE01131311132D1A000772310000706F0C00000A000772B50400706F0C00000A000000086F2200000A741A00000113050E0616FE01131311133A9C000000000772DD04007011056F2300000A282400000A280D00000A6F0C00000A0007720305007011056F2500000A282600000A280D00000A6F0C00000A00071B8D0100000113151115167225050070A211151711056F2700000A8C1B000001282800000A8C1C000001A21115187255050070A211151911056F2700000A8C1B000001280900000AA211151A725D050070A21115282900000A6F0C00000A000000DDDE000000130D00110D6F2A00000A130E000772310000706F0C00000A00077261050070110D6F2B00000A280D00000A6F0C00000A00110D6F2C00000A130F0772A5050070110F8C1E000001282100000A6F0C00000A00110F1DFE0116FE01131311132D64000772E90500706F0C00000A00110D6F2A00000A741A0000011310071A8D0100000113151115167231060070A211151711106F2700000A8C1C000001A2111518727D060070A211151911106F2700000A8C1B000001A21115282900000A6F0C00000A000000DE14110E14FE01131311132D08110E6F2D00000A00DC00FE1A000011056F2E00000A0D09732F00000A13040E0811046F3000000A280B00000A810200000100DE0D26007285060070733100000A7A000E0616FE01131311132D1A000772310000706F0C00000A000772220700706F0C00000A0000086F1600000A130611066F3200000A131116130838EC000000000E0616FE01131311132D1800077239030070111111089A280D00000A6F0C00000A00000E07257102000001111111089A725E070070280D00000A280B00000A283300000A81020000011106111111089A6F3400000A13121613092B77000E0616FE01131311132D3E00071A8D0100000113151115167264070070A211151711098C1C000001A2111518725E070070A2111519111211099AA21115282900000A6F0C00000A00000E07257102000001111211099A7272070070280D00000A280B00000A283300000A810200000100110917581309110911128E69FE04131311133A78FFFFFF00110817581308110811118E69FE04131311133A03FFFFFF0E0616FE01131311132D1A000772780700706F0C00000A000772310000706F0C00000A000011056F3500000A00096F2000000A0011046F3600000A000E0911056F2700000A8C1B000001282800000A540E0616FE01131311133ABE000000000772310000706F0C00000A000772C00700706F0C00000A000772310000706F0C00000A000E0871020000018C02000001280900000A6F1300000A16FE0216FE01131311132D10000772160800706F0C00000A00002B300E0771020000018C02000001280900000A6F1300000A16FE0216FE01131311132D0E0007725C0800706F0C00000A00000772AA0800700E094A283700000A8C1C000001282100000A6F0C00000A000772310000706F0C00000A000772C60800706F0C00000A000000DE120614FE01131311132D07066F2D00000A00DC002A0000004194000000000000320100001A0000004C0100000400000001000001000000009E010000AC0000004A02000032000000010000010200000053050000BB0000000E06000014000000000000000000000089040000BE00000047050000DE0000001D0000010000000026060000270000004D0600000D00000001000001020000000C000000A9080000B508000012000000000000001E02283800000A2A42534A4201000100000000000C00000076322E302E35303732370000000005006C00000048030000237E0000B40300003C05000023537472696E677300000000F0080000D808000023555300C8110000100000002347554944000000D8110000FC01000023426C6F620000000000000002000001471502000900000000FA253300160000010000002200000002000000020000000A000000380000000400000001000000010000000300000000000A00010000000000060056004F000A007E00690006000401E5000600440131011300580100000600870167010600A70167010A00F401D9010A0020020A020A002E02D9010A003902D901060056024A02060068024F00060093024F000E00AC02A1020E00BE02A1020E00DB02A1020E00ED02A102060015034F0006001A034F00060033034F000E003F03A1020E007E035F030600F403EA030E001804A1020E003004A1020E006204A102060088044F000E008E04A1020E00A804A1020600C6044F000600EC04EA030600F904EA0306000E054F0000000000010000000000010001000100100022003300050001000100D02000000000960088000A0001003C2A000000008618940023000B00000001009A0000000200A10000000300A50000000400B40000000500BD0000000600C60000000700CF0002000800D50002000900110102000A001E01190094002300210094002700310094002D0039009400230041009400230049009400D90051004102DE0061005F02E30069007002E80061007902ED0011008202F30059008E02D90071009A02F9007900B702FF007100CD02050171009A020B018900940013017900FA02190171000A031F0171002D032301A90039032C01790053033401B9009203130181009B03D9007100A90339017100B10305017900BD03D9007900C803D9007900D8033D017900FB034201C1000C044701C1001204230071009A024F01790024045501C90040045A01690070025E01C90052043901690070026301D10071046801690080046D0171009A027201E9009B045501090070023901E900BB047801F900D2042300C900DA044201010194007D0109010405390111019400D900B90018058301110024058801B90030059101C9001204230009011204230069008004970109009400230020002B00D4002E001300C9012E001B00D2012E002300DB019C01048000000000000000000000010000003200C5010000020000000000000000000000010046000000000002000000000000000000000001005D000000000002000000000000000000000001004F00000000000000003C4D6F64756C653E00434C525F6874747057656252657175657374732E646C6C0053746F72656450726F6365647572657300434C52687474705765625265717565737473006D73636F726C69620053797374656D004F626A6563740053797374656D2E446174610053797374656D2E446174612E53716C54797065730053716C537472696E67006874747052657175657374002E63746F72006D6574686F640075726C00726571756573744865616465727300757365726E616D650070617373776F726400706F73744461746100446562756700726573706F6E7365486561646572730053797374656D2E52756E74696D652E496E7465726F705365727669636573004F757441747472696275746500726573706F6E73654461746100726573706F6E7365537461747573436F64650053797374656D2E446961676E6F73746963730044656275676761626C6541747472696275746500446562756767696E674D6F6465730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C69747941747472696275746500434C525F687474705765625265717565737473004D6963726F736F66742E53716C5365727665722E5365727665720053716C50726F6365647572654174747269627574650053797374656D2E446174612E53716C436C69656E740053716C436F6E6E656374696F6E0053716C436F6E746578740053716C50697065006765745F506970650053797374656D2E5465787400456E636F64696E67006765745F5554463800436F6E7665727400546F537472696E67004765744279746573006F705F496D706C696369740053656E6400537472696E6700436F6E6361740053797374656D2E4E6574005765625265717565737400437265617465004874747057656252657175657374006F705F496E657175616C697479004E6574776F726B43726564656E7469616C004943726564656E7469616C73007365745F43726564656E7469616C73006765745F4C656E677468004368617200537472696E6753706C69744F7074696F6E730053706C697400417272617900436C65617200576562486561646572436F6C6C656374696F6E006765745F486561646572730053797374656D2E436F6C6C656374696F6E732E5370656369616C697A6564004E616D6556616C7565436F6C6C656374696F6E007365745F4974656D007365745F557365724167656E7400546F5570706572006F705F457175616C697479007365745F4D6574686F64007365745F436F6E74656E7454797065007365745F436F6E74656E744C656E6774680053797374656D2E494F0053747265616D004765745265717565737453747265616D00577269746500436C6F736500576562526573706F6E736500476574526573706F6E73650048747470576562526573706F6E7365006765745F436F6E74656E744C656E677468006765745F436F6E74656E74547970650048747470537461747573436F6465006765745F537461747573436F646500546F496E74333200496E74333200576562457863657074696F6E006765745F526573706F6E736500576562457863657074696F6E537461747573006765745F5374617475730049446973706F7361626C6500446973706F736500476574526573706F6E736553747265616D0053747265616D52656164657200546578745265616465720052656164546F456E6400457863657074696F6E006765745F416C6C4B657973006F705F4164646974696F6E0047657456616C756573000000002F63006F006E007400650078007400200063006F006E006E0065006300740069006F006E003D0074007200750065000001004D2D002D002D002D002D00530074006F007200650064002000700072006F006300650064007500720065002000480074007400700052006500710075006500730074002D002D002D002D002D000121530065006E007400200070006100720061006D00650074006500720073003A0000134D006500740068006F00640020003D002000000D550052004C0020003D00200000237200650071007500650073007400480065006100640065007200730020003D002000001755007300650072006E0061006D00650020003D0020000017500061007300730077006F007200640020003D002000001770006F0073007400440061007400610020003D002000002D4300720065006100740065002000480074007400700057006500620052006500710075006500730074002E000049480074007400700057006500620052006500710075006500730074002000630072006500610074006500640020007300750063006300650073007300660075006C006C0079002E000023520065007100750065007300740020006D006500740068006F00640020003D002000005F43006F006E00740065006E007400540079007000650020003D0020006100700070006C00690063006100740069006F006E002F0078002D007700770077002D0066006F0072006D002D00750072006C0065006E0063006F006400650064000137410075007400680065006E007400690063006100740069006F006E003A00200055007300650072006E0061006D00650020003D002000001B3B002000500061007300730077006F007200640020003D0020000037410075007400680065006E007400690063006100740069006F006E0020007300750063006300650073007300660075006C006C002E000045410075007400680065006E007400690063006100740069006F006E0020006600610069006C00650064003A00200055007300650072006E0061006D00650020003D00200000392A002A002A0048005400540050002000480065006100640065007200730020002D00200052006500710075006500730074002A002A002A00010B4B00650079003A002000000F560061006C00750065003A00200000452A002A002A0048005400540050002000480065006100640065007200730020002D002000520065007100750065007300740020002D00200045006E0064002A002A002A00013943004C0052002000770065006200200063006C00690065006E00740020006F006E002000530051004C002000530065007200760065007200000950004F005300540000436100700070006C00690063006100740069006F006E002F0078002D007700770077002D0066006F0072006D002D00750072006C0065006E0063006F00640065006400012B5300750062006D00690074002000740068006500200050004F0053005400200064006100740061002E0000414400610074006100200068006100730020006200650065006E0020007300750063006300650073007300660075006C006C0079002000730065006E0074002E00002352006500710075006500730074002000730074007200650061006D0020003D00200000274700650074002000480074007400700057006500620052006500730070006F006E0073006500002543006F006E00740065006E00740020006C0065006E006700740068002000690073002000002143006F006E00740065006E007400200074007900700065002000690073002000002F52006500730070006F006E00730065002000730074006100740075007300200063006F006400650020003D00200000072000280020000003290000434800540054005000200072006500730070006F006E0073006500200065007800630065007000740069006F006E0020006D006500730073006100670065003A00200000434800540054005000200072006500730070006F006E0073006500200065007800630065007000740069006F006E002C0020007300740061007400750073003A002000004754006800650020007300650072007600650072002000720065007400750072006E00650064002000700072006F0074006F0063006F006C0020006500720072006F0072002000004B4800540054005000200072006500730070006F006E0073006500200065007800630065007000740069006F006E002000730074006100740075007300200063006F00640065003A002000000720002D00200001809B43004C00520020002D0020004E0061006D0065003A0020004800740074007000570065006200520065007100750065007300740073003B002000530074006F00720065006400500072006F006300650064007500720065003A0020004800740074007000520065007100750065007300740020002D00200020004700650074002000640061007400610020006600610069006C00650064002E00013B2A002A002A0048005400540050002000480065006100640065007200730020002D00200052006500730070006F006E00730065002A002A002A0001053A002000000D560061006C0075006500200000053B00200000472A002A002A0048005400540050002000480065006100640065007200730020002D00200052006500730070006F006E007300650020002D00200045006E0064002A002A002A000155530074006F007200650064002000700072006F0063006500640075007200650020006900730020006500780065006300750074006500640020007300750063006300650073007300660075006C006C0079002E00004544006100740061002000690073002000720065007400750072006E0065006400200069006E0020004800540054005000200072006500730070006F006E00730065002E00004D480065006100640065007200730020006100720065002000720065007400750072006E0065006400200069006E0020004800540054005000200072006500730070006F006E00730065002E00001B530074006100740075007300200063006F00640065003A002000000F5300550043004300450053005300000000C89241F9070CDB4DBEA0B275B3F729230008B77A5C561934E08918000A0111091109110911091109110902101109101109100803200001052001011115042001010880A000240000048000009400000006020000002400005253413100040000010001005791DBD2AB9B4FD62AC9F4A1B20B656892B86D780CAC24A9BE1F8E9BCF362C84927FFC69C90F3F0493D16421808697D1129C273C23DFC9DED45C7D650001178DA5B85CC9DFDD9BDE18A795D6EE308DBE988AF12C8F6EF4E6BCD94B0FA0B269E7E9A266652B9EDFB2243E1BEF7D941D08946370E0CA8DABEE4EAB92DA026D42A60401000000042001010E040000122D04000012310400010E1C0520011D050E05000111090E0500020E0E0E050001123D0E050002020E0E0700040E0E0E0E0E052002010E0E052001011249032000080820021D0E1D031151070003011255080804200012590320000E042001010A0420001261072003011D0508080500020E1C1C04200012650320000A0400010E0A0400010E0E042000116D040001081C0500010E1D1C04200011790520010112610420001D0E0800021109110911090520011D0E0E04000108082C07161225122D124112611280811269125D1D0508081D031D0E1D0E12751265117912691D0E1D0E021D031D1C0801000701000000000801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F777301000000000000C699E65600000000020000001C010000343E000034200000525344533FBAF09652D0874AB440910305FA5F7A03000000633A5C50726F6A656374735C4874747057656252657175657374735C4874747057656252657175657374735C6F626A5C44656275675C434C525F6874747057656252657175657374732E706462000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000783F000000000000000000008E3F0000002000000000000000000000000000000000000000000000803F00000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF2500200010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000740200000000000000000000740234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004D4010000010053007400720069006E006700460069006C00650049006E0066006F000000B001000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E003000000050001800010049006E007400650072006E0061006C004E0061006D006500000043004C0052005F006800740074007000570065006200520065007100750065007300740073002E0064006C006C0000002800020001004C006500670061006C0043006F0070007900720069006700680074000000200000005800180001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000043004C0052005F006800740074007000570065006200520065007100750065007300740073002E0064006C006C000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000A03F00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
    WITH PERMISSION_SET = EXTERNAL_ACCESS;
GO

ALTER ASSEMBLY [CLR_httpWebRequests]
    DROP FILE ALL
    ADD FILE FROM 0x4D6963726F736F667420432F432B2B204D534620372E30300D0A1A445300000000020000020000001F0000009C000000000000001E00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020F9FFF3FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF1802008CFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0BCA3101380000000010000000100000000000000D00FFFF04000000FFFF03000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA3101380000000010000000100000000000000E00FFFF04000000FFFF0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000F862513FC607D311905300C04FA302A1C4454B99E9E6D211903F00C04FA302A10B9D865A1166D311BD2A0000F80849BD60A66E40CF64824CB6F042D48172A7991000000000000000D902962E0E35F73364D88E9B5EC2302A000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA310138000000001000000010000000000000FFFFFFFF04000000FFFF030000000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BCA310138000000001000000010000000000000FFFFFFFF04000000FFFF030000000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C908000000000000C90800000000000000000000000000000000000000000000581000002C0200002C00000034000000FFFFFFFF280000001D000000030000000600000019000000070000000A00000009000000040000000C0000000D0000000E0000000F000000100000001100000012000000130000001400000015000000160000001800000017000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001BE2300180000000BF1799ADE07DD101020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000200000001000000020000000000000041000000280000001BE23001A90F424B58000000010000004000000041000000650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FEEFFEEF010000008000000000633A5C50726F6A656374735C4874747057656252657175657374735C4874747057656252657175657374735C4874747057656252657175657374732E63730000633A5C70726F6A656374735C6874747077656272657175657374735C6874747077656272657175657374735C6874747077656272657175657374732E6373000400000040000000010000004100000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001BE23001800000007CB65EB4E07DD101030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000200000001000000020000000000000041000000280000001BE23001A90F424B580000000100000040000000410000006500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000036002A11000000000805000000000000C90800000000000000000000010000060000000001000000006874747052657175657374000000001600031104000000D0040000C908000000000000010000000A0024115553797374656D001A0024115553797374656D2E446174612E53716C436C69656E7400001A0024115553797374656D2E446174612E53716C54797065730000001E002411554D6963726F736F66742E53716C5365727665722E536572766572000E0024115553797374656D2E4E657400120024115553797374656D2E54657874000000000E0024115553797374656D2E494F00000E0024115553797374656D2E57656200220024115553797374656D2E436F6C6C656374696F6E732E5370656369616C697A6564001E002011130000000100001100000000000004004353243424303030300000001E002011140000000100001100000000000004004353243024303030310000001E00201115000000010000110000000000000400435324302430303032000000160003113C000000CC040000C7080000010000000100000022002011000000000100001100000000000000006462436F6E6E656E6374696F6E0000001600031180010000C8040000A70800000C000000010000001A0020110100000001000011000000000000000070697065000000001A0020110200000001000011000000000000000072657175657374001E002011030000000100001100000000000000006461746153747265616D00001600201104000000010000110000000000000000726472001E00201105000000010000110000000000000000726573706F6E7365000000002200201106000000010000110000000000000000686561646572735265636965766564001A00201107000000010000110000000000000000646174610000000016002011080000000100001100000000000000006900000016002011090000000100001100000000000000006A0000001A00201111000000010000110000000000000000617272310000000016000311BC01000090030000EE0000009C020000010000001E0020110A00000001000011000000000000000064656C696D697465720000002A0020110B00000001000011000000000000000072657175726965644865616465727341727261790000000016000311F00200008C0300006800000001030000010000001E0020110C000000010000110000000000000000687474704865616465720000020006000200060016000311BC0100008C040000DC0000004905000001000000160020110D00000001000011000000000000000077657800160003119403000088040000D90000004A05000001000000220020110E000000010000110000000000000000776562457863657074696F6E0000000016000311C403000084040000B900000053050000010000002A0020110F000000010000110000000000000000726573706F6E7365457863657074696F6E5374617475730016000311000400008004000064000000A705000001000000220020111000000001000011000000000000000068747470526573706F6E7365000000000200060002000600020006000200060016000311BC010000C4040000E600000099060000010000001A0020111200000001000011000000000000000061727232000000000200060002000600020006000200060032000404C93FEAC6B359D649BC250902BBABB460000000004D00440032000000040100000400000010000000020000000900000002000600F2000000280B00000000000001000100C908000000000000EC0000001C0B0000000000003700008001000000380000800C000000390000800D0000003B00008013000000410000802B000000440000803C0000004600008043000000EEEFFE804A000000470000804B000000480000805700000049000080630000004A0000806F0000004B0000808B0000004C000080A70000004D000080C30000004E000080DF0000004F000080FC000000500000801901000051000080250100005200008031010000530000803201000057000080330100005800008049010000590000804A010000EEEFFE804C0100005A0000804D0100005B0000804E0100005C00008050010000EEEFFE80510100005F00008058010000EEEFFE805C010000600000805D010000610000806901000062000080750100006300008091010000640000809D010000650000809E010000690000809F0100006A000080CB010000EEEFFE80CF0100006B000080D00100006C000080D7010000EEEFFE80DB0100006D000080DC0100006E000080090200006F0000800A020000710000802D0200007300008034020000EEEFFE803802000074000080390200007500008045020000760000804602000077000080470200007800008048020000EEEFFE804A020000790000804B0200007A0000804C0200007B000080790200007C0000807A020000EEEFFE807C020000EEEFFE807D0200008000008095020000EEEFFE809C020000810000809D02000082000080A4020000EEEFFE80A802000083000080A902000084000080B502000085000080C102000086000080C202000088000080D40200008A000080E90200008D000080F60200008E000080FC02000090000080FF020000EEEFFE8001030000910000800203000092000080110300009400008025030000960000802C030000EEEFFE803003000097000080310300009800008046030000990000805B0300009A000080670300009B000080680300009C00008069030000900000806F0300009000008079030000EEEFFE807D0300009D000080890300009E0000808A030000EEEFFE808C030000A00000808D030000A200008099030000A40000809A030000A7000080B9030000EEEFFE80C0030000A8000080C1030000A9000080D3030000AA000080DF030000AB000080EB030000AD000080F2030000EEEFFE80F6030000AE000080F7030000AF00008003040000B00000800F040000B100008010040000B400008017040000B500008025040000B70000802C040000B900008033040000EEEFFE8037040000BA00008038040000BB00008044040000BC00008056040000BD00008062040000BE00008063040000BF00008064040000C10000806B040000EEEFFE806F040000C200008070040000C30000807C040000C400008088040000C500008089040000C90000808A040000CA00008097040000CC0000809E040000EEEFFE80A5040000CD000080A6040000CE000080C3040000CF000080E0040000D000008040050000D100008041050000D300008042050000EEEFFE8047050000D400008049050000D50000804A050000D600008053050000D700008054050000D900008060050000DA00008078050000DD00008081050000DF00008099050000E3000080A3050000EEEFFE80A7050000E4000080A8050000E5000080B4050000E7000080C2050000E80000800A060000E90000800B060000EA0000800C060000EEEFFE8022060000EEEFFE8023060000EB00008025060000EEEFFE8026060000F200008027060000F30000802F060000F400008037060000F50000804A060000F60000804B060000EEEFFE804D060000F70000804E060000F80000804F060000F90000805A060000EEEFFE805B060000FD00008062060000EEEFFE8066060000FE00008067060000FF00008073060000000100807F0600000101008080060000040100808806000007010080910600000901008094060000EEEFFE80990600000A0100809A0600000B010080A1060000EEEFFE80A50600000C010080A60600000D010080BC0600000E010080BD06000010010080E306000013010080F106000014010080F4060000EEEFFE80F606000015010080F706000016010080FE060000EEEFFE80020700001701008003070000180100803F07000019010080400700001B010080660700001C01008067070000140100806D0700001401008077070000EEEFFE807E0700001D0100807F0700000901008085070000090100808F070000EEEFFE80960700001F0100809D070000EEEFFE80A107000020010080A207000021010080AE07000022010080BA07000023010080BB07000026010080C307000028010080CA07000029010080D20700002C010080E60700002E010080ED070000EEEFFE80F40700002F010080F50700003001008001080000310100800D08000032010080190800003301008037080000EEEFFE803B080000340100803C08000035010080480800003601008049080000EEEFFE804B0800003701008069080000EEEFFE806D080000380100806E080000390100807A0800003A0100807B0800003C010080990800003D010080A50800003E010080B10800003F010080B208000040010080B3080000EEEFFE80C7080000EEEFFE80C80800004101008009000A0014005E000D000E0011003000110052001100260011001B00000000001100120015004900150023001500330015004700150041001500570015004B0015004B0015004B0015002300150039001100120011001200150058001100120000000000110016001100120015001B000000000011001B000000000011001200150047001500230015004F0015005200110012001100120015005F000000000015001600190023000000000019001A001D00920019001A0019007D00190023000000000019001A001D00460019001A0015001600110012000000000011001600110012001500910011001200000000000000000011004100000000001100120015001F0000000000150016001900270019004300150016001500300015008E0015004100150028001A001F00000000001500160019007F0019004800190023000000000019001A001D0040001D0042001D002B0019001A00150016004200450021004000000000001500450011001200000000001100120015005A001100120011004200000000001100120015003F0015004F00150039001500210000000000150016001900270019003C001500160015003D0015003C001500280015001F000000000015001600190047001900450019002700150016001100120011001B000000000011001200150023001500360011001200110012001500470015001F000000000015001600190064001900600019009B0015001600110012000000000011002900110012001C0043001500160019002700190059001900510019006200190059000000000019001A001D004E001D005A001D00910019001A0015001600000000000000000015001B00000000001100120015003F001500380015003F001100120000000000110016001100120015007A000000000011001B000000000011001200150023001500400011001200110033001100390016001B00000000001100120015001F000000000015001600190036001500160015003700150048001A001F000000000015001600190023000000000019001A001D00460019001A0019003B0015001600320035002100300000000000110012002E0031001D002C000000000011001B000000000011001200150046001500230011001200110022001100240011001D0011004B0011001B0000000000110012001500230015004D00150023001500430000000000150016001900490015001600000000001A004B00000000001500160019004D0015001600150056001500230015002A00110012000D000E00000000000000000009000A00F400000008000000010000000000000008000000000000001C00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF1A092FF1100000000C0200001D000000010000000100000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001A0025110000000004000000010068747470526571756573740000001600291100000000040000000100303630303030303100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000FFFFFFFF1A092FF10000000000000000303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF77093101030000000A00008E0B000E040C00000070000000200000002C0000004C000000000000000000000016000000190000000000EEC00000000000000000FFFF000000000000FFFFFFFF00000000FFFF00000000000000000000000009000C05000000000000400B000001000000707F94000000000000000000434C526874747057656252657175657374732E53746F72656450726F63656475726573004539333134373446000000002DBA2EF10100000000000000C908000000000000000000000000000000000000020002000D01000000000100FFFFFFFF00000000C90800000802000000000000FFFFFFFF00000000FFFFFFFF010001000000010000000000633A5C50726F6A656374735C4874747057656252657175657374735C4874747057656252657175657374735C4874747057656252657175657374732E63730000FEEFFEEF010000000100000000010000000000000000000000FFFFFFFFFFFFFFFFFFFF0F00FFFFFFFFFFFFFFFFFFFF00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900000098000000C800000038000000FFFFFFFF3800000000000000A40000008000000058000000080000000300000006000000070000000A000000090000000400000072632F66696C65732F633A5C70726F6A656374735C6874747077656272657175657374735C6874747077656272657175657374735C6874747077656272657175657374732E6373000400000006000000010000003A0000000000000011000000070000000A000000060000000000000005000000220000000800000000000000DC5133010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001A00000020000000C800000038000000770100003800000000000000A4000000800000005800000028000000581000002C0200002C00000034000000030000001A0000000600000019000000070000000A0000000B00000008000000090000000C0000000D0000000E0000000F00000010000000110000001200000013000000140000001500000016000000180000001700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000942E3101AA95E656030000003FBAF09652D0874AB440910305FA5F7A6C0000002F4C696E6B496E666F002F6E616D6573002F7372632F686561646572626C6F636B002F7372632F66696C65732F633A5C70726F6A656374735C6874747077656272657175657374735C6874747077656272657175657374735C6874747077656272657175657374732E6373000400000006000000010000003A0000000000000011000000070000000A000000060000000000000005000000220000000800000000000000DC5133010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000044000000C800000038000000770100003800000000000000A40000008000000058000000581000002C0200002C00000034000000FFFFFFFFFFFFFFFF280000001A0000001C0000000600000019000000070000000A0000000B000000050000000C0000000D0000000E0000000F0000001000000011000000120000001300000014000000150000001600000018000000170000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001D00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 AS N'CLR_httpWebRequests.pdb';

GO

CREATE PROCEDURE [net].[httpRequest]
@method NVARCHAR (MAX), @url NVARCHAR (MAX), @requestHeaders NVARCHAR (MAX), @username NVARCHAR (MAX), @password NVARCHAR (MAX), @postData NVARCHAR (MAX), @Debug BIT, @responseHeaders NVARCHAR (MAX) OUTPUT, @responseData NVARCHAR (MAX) OUTPUT, @responseStatusCode INT OUTPUT
AS EXTERNAL NAME [CLR_httpWebRequests].[CLRhttpWebRequests.StoredProcedures].[httpRequest]



--EXEC ('CREATE PROCEDURE [net].[httpRequestWrapper] @lastTimestamp datetime2 = NULL AS RAISERROR(''Not implemented!'', 16, 1);');
--EXEC ('CREATE PROCEDURE [net].[httpRequest] @lastTimestamp datetime2 = NULL AS RAISERROR(''Not implemented!'', 16, 1);');
GO

CREATE PROCEDURE [net].[httpRequestWrapper]
    (
      @url varchar(500),
	  @method varchar(10),
	  @requestHeaders nvarchar(max) = '', --Header format: "Key:Value; Key:Value;"    ;-delimiter
	  @username varchar(100) = '',
	  @password varchar(100) = '',
      @postData nvarchar(max) = '',
	  @Debug bit = 0,
	  @responseHeaders nvarchar(max)  = NULL OUTPUT, --Header format: "Key:Value; Key:Value;"    ;-delimiter
	  @responseData nvarchar(max)  = NULL OUTPUT,
	  @responseStatusCode int = NULL  OUTPUT

    )
AS 
/*
=============================================
Created: 9-March-2016 Nenad Maric
	CLR SP can not have optional parameters.
	Create a wrapper for CLR stored procedure HttpWebRequest, so optional parameters can be forwarded. 
	
Modification History:

=============================================
*/
BEGIN

  SET NOCOUNT ON;
  
  DECLARE 
		  @Result INT
		, @ErrMsg VARCHAR(200);
	
	BEGIN TRY
	-- Error Checking
		IF (@url IS NULL)
			BEGIN
				SET @ErrMsg = 'Value for input parameters @url and @method  must be provided.'
				RAISERROR (@ErrMsg, 16, 1);
			END;

		IF ( UPPER(@method) NOT IN ('GET', 'POST'))
			BEGIN
				SET @ErrMsg = 'Value for input parameter @method is not valid. Parameter @method can be GET or POST.'
				RAISERROR (@ErrMsg, 16, 1);
			END

			EXEC net.httpRequest 
				@method = @method,
				@url = @url,
				@requestHeaders = @requestHeaders,
				@username = @username,
				@password = @password,
				@postData = @postData,
				@Debug = @Debug,
				@responseHeaders = @responseHeaders OUT,
				@responseData = @responseData OUT,
				@responseStatusCode = @responseStatusCode OUT;
				
			--Result
			SELECT @responseData AS responseData, 
			       @responseHeaders AS responseHeader, 
				   @responseStatusCode as responseStatusCode;

			--Headers
			--SELECT ssbd.Position, 
			--       ssbd.Value 
			--FROM dbo.SplitString_ByDelimiter( @responseHeaders, ';') AS ssbd

	END TRY
		
	BEGIN CATCH

		DECLARE @ErrorMessage NVARCHAR(4000);
		DECLARE @ErrorSeverity INT;
		DECLARE @ErrorState INT;
    
		SELECT @ErrorMessage  = ERROR_MESSAGE(),
			   @ErrorSeverity = ERROR_SEVERITY(),
			   @ErrorState	  = ERROR_STATE();
			
		IF @@TRANCOUNT > 0
			BEGIN
				ROLLBACK TRAN;
			END;

		-- Use RAISERROR inside the CATCH block to return error
		-- information about the original error that caused
		-- execution to jump to the CATCH block.
		RAISERROR (@ErrorMessage,	-- Message text.
				   @ErrorSeverity,	-- Severity.
				   @ErrorState		-- State.
				  );
	END CATCH;
		      
END

GO

USE master;
GO

/* test */
EXEC  Utility.[net].[httpRequestWrapper] 
		@method = 'get',
		@url = 'https://httpbin.org/basic-auth/user/passwd',
		@username = 'user',
		@password = 'passwd',
		@Debug = 1,
		@requestHeaders = 'UserAgent:CLR web client on SQL Server'
GO
